---
layout: post
status: publish
published: true
title: python
author: admin
author_login: admin
author_email: denzeljiang@gmail.com
wordpress_id: 465
wordpress_url: http://note.jzr.me/?p=465
date: 2013-07-04 18:16:21.000000000 -04:00
categories:
- Uncategorized
tags: []
comments: []
---
error control block need to be added to the code
so the program will skip the bad lines and continue running
<pre class="brush:py">	try:
		tweet = loads(line)
	except:
		print 'couldn\'t load line: '+ str(counter)
		continue</pre>
sample code
<pre class="brush:py">from bson.json_util import dumps
from bson.json_util import loads
import json

# find  urls in the interested collection
# save tweet id, uid, and urls in a csv format
f = open("interestedTweets2.txt", 'r')
fw = open("urls_list.csv", 'w+')
# output = ''
counter = 0

for line in f.readlines():
	counter += 1
	try:
		tweet = loads(line)
	except:
		print 'couldn\'t load line: '+ str(counter)
		continue
	# print type(tweet)
	#print counter
	output = str(tweet["id_str"]) + ", " + str(tweet["user"]["id"])
	if counter % 100 == 0:
		print counter
	for url in tweet["entities"]["urls"]:
		output += ", " + str(url["expanded_url"])
	fw.write(output + "\n")

f.close()</pre>
save lines 344300+ to interestedTweets2.txt

<pre class="brush:py">
fr = open("interestedTweets.txt")
fw = open("interestedTweets2.txt", 'w+')
for i, line in enumerate(fr):
    if i > 344300 :
    	fw.write(line)
print 'last line num: '+ str(i)
fr.close()</pre>
